const productos = [
    {
      id: 1,
      nombre: "Camiseta FC Barcelona",
      precio: 50000,
      equipo: "FC Barcelona",
      marca: "Nike",
      imagen: "barcelona.png"
    },
    {
      id: 2,
      nombre: "Camiseta Real Madrid",
      precio: 55000,
      equipo: "Real Madrid",
      marca: "Adidas",
      imagen: "real madrid.png",
    },
    {
      id: 3,
      nombre: "Camiseta Manchester United",
      precio: 52000,
      equipo: "Manchester United",
      marca: "Adidas",
      imagen: "manchester united.png"
    },
    {
      id: 4,
      nombre: "Camiseta Bayern Munich",
      precio: 53000,
      equipo: "Bayern Munich",
      marca: "Adidas",
      imagen:"bayern munich.png"
       
    },
    {
      id: 5,
      nombre: "Camiseta Juventus",
      precio: 54000,
      equipo: "Juventus",
      marca: "Adidas",
      imagen: "juventus.png"
    },
    {
      id: 6,
      nombre: "Camiseta Paris Saint-Germain",
      precio: 56000,
      equipo: "Paris Saint-Germain",
      marca: "Nike",
      imagen: "psg.png"
       
    },
    {
      id: 7,
      nombre: "Camiseta Liverpool",
      precio: 51000,
      equipo: "Liverpool",
      marca: "Nike",
      imagen: "liverpool.png"
        
    },
    {
      id: 8,
      nombre: "Camiseta Chelsea",
      precio: 52000,
      equipo: "Chelsea",
      marca: "Nike",
      imagen: "chelsea.png"
        
    },
    {
      id: 9,
      nombre: "Camiseta Manchester City",
      precio: 53000,
      equipo: "Manchester City",
      marca: "Puma",
      imagen: "manchester city.png"
       
    },
    {
      id: 10,
      nombre: "Camiseta Arsenal",
      precio: 54000,
      equipo: "Arsenal",
      marca: "Adidas",
      imagen: "arsenal.png",
    },
    {
      id: 11,
      nombre: "Camiseta Tottenham Hotspur",
      precio: 55000,
      equipo: "Tottenham Hotspur",
      marca: "Nike",
      imagen: "tottenham.png"
    },  
    {
      id: 12,
      nombre: "Camiseta Inter Milan",
      precio: 56000,
      equipo: "Inter Milan",
      marca: "Nike",
      imagen: "inter.png"  
    },
    {
      id: 13,
      nombre: "Camiseta AC Milan",
      precio: 57000,
      equipo: "AC Milan",
      marca: "Puma",
      imagen: "milan.png"
        
    },
    {
      id: 14,
      nombre: "Camiseta Borussia Dortmund",
      precio: 58000,
      equipo: "Borussia Dortmund",
      marca: "Puma",
      imagen: "dortmund.png"
        
    },
    {
      id: 15,
      nombre: "Camiseta Atletico Madrid",
      precio: 59000,
      equipo: "Atletico Madrid",
      marca: "Nike",
      imagen: "atletico de madrid .png"
        
    },
    {
      id: 16,
      nombre: "Camiseta Sevilla",
      precio: 60000,
      equipo: "Sevilla",
      marca: "Castore",
      imagen:"sevilla.png"
        
    },
    {
      id: 17,
      nombre: "Camiseta Roma",
      precio: 61000,
      equipo: "Roma",
      marca: "Adidas",
      imagen: "roma.png",
    },
    {
      id: 18,
      nombre: "Camiseta Napoli",
      precio: 62000,
      equipo: "Napoli",
      marca: "EA7",
      imagen: "napoli.png"
        
    },
    {
      id: 19,
      nombre: "Camiseta Lazio",
      precio: 63000,
      equipo: "Lazio",
      marca: "Mizuno",
      imagen: "lazio.png"
        
    },
    {
      id: 20,
      nombre: "Camiseta Ajax",
      precio: 64000,
      equipo: "Ajax",
      marca: "Adidas",
      imagen: "ajax.png"
        
    },
    {
      id: 21,
      nombre: "Camiseta Benfica",
      precio: 65000,
      equipo: "Benfica",
      marca: "Adidas",
      imagen: "benfica.png"
        
    },
    {
      id: 22,
      nombre: "Camiseta Porto",
      precio: 66000,
      equipo: "Porto",
      marca: "New Balance",
      imagen: "porto.png"
        
    },
    {
      id: 23,
      nombre: "Camiseta Sporting CP",
      precio: 67000,
      equipo: "Sporting CP",
      marca: "Nike",
      imagen: "sporting cp.png"
        
    },
    {
      id: 24,
      nombre: "Camiseta Celtic",
      precio: 68000,
      equipo: "Celtic",
      marca: "Adidas",
      imagen: "celtic.png"
        
    },
    {
      id: 25,
      nombre: "Camiseta Rangers",
      precio: 69000,
      equipo: "Rangers",
      marca: "Castore",
      imagen: "rangers.png"
        
    },
    {
      id: 26,
      nombre: "Camiseta Galatasaray",
      precio: 70000,
      equipo: "Galatasaray",
      marca: "Puma",
      imagen: "galatasaray.png"
        
    },
    {
      id: 27,
      nombre: "Camiseta Fenerbahce",
      precio: 71000,
      equipo: "Fenerbahce",
      marca: "Puma",
      imagen: "fenerbache.png"
        
    },
    {
      id: 28,
      nombre: "Camiseta Besiktas",
      precio: 72000,
      equipo: "Besiktas",
      marca: "Adidas",
      imagen: "besiktas.png"
        
    },
    {
      id: 29,
      nombre: "Camiseta Olympique Lyon",
      precio: 73000,
      equipo: "Olympique Lyon",
      marca: "Adidas",
      imagen: "lyon.png"
        
    },
    {
      id: 30,
      nombre: "Camiseta Olympique Marsella",
      precio: 74000,
      equipo: "Olympique Marsella",
      marca: "Puma",
      imagen: "marsella.png"
        
    },
    {
      id: 31,
      nombre: "Camiseta Monaco",
      precio: 75000,
      equipo: "Monaco",
      marca: "Kappa",
      imagen: "monaco.png"
    },
    {
      id: 32,
      nombre: "Camiseta PSV Eindhoven",
      precio: 76000,
      equipo: "PSV Eindhoven",
      marca: "Puma",
      imagen: "psv.png"
        
    },
    {
      id: 33,
      nombre: "Camiseta Feyenoord",
      precio: 77000,
      equipo: "Feyenoord",
      marca: "Castore",
      imagen: "feyenoord.png",
    },
    {
      id: 34,
      nombre: "Camiseta Anderlecht",
      precio: 78000,
      equipo: "Anderlecht",
      marca: "Joma",
      imagen: "anderlecht.png"
        
    },
    {
      id: 35,
      nombre: "Camiseta Club Brugge",
      precio: 79000,
      equipo: "Club Brugge",
      marca: "Castore",
      imagen: "brugge.png"
        
    },
    {
      id: 36,
      nombre: "Camiseta Shakhtar Donetsk",
      precio: 80000,
      equipo: "Shakhtar Donetsk",
      marca: "Puma",
      imagen: "shakhtar.png"
        
    },
    {
      id: 37,
      nombre: "Camiseta Dynamo Kyiv",
      precio: 81000,
      equipo: "Dynamo Kyiv",
      marca: "New Balance",
      imagen: "kiev.png"
        
    },
    {
      id: 38,
      nombre: "Camiseta Zenit",
      precio: 82000,
      equipo: "Zenit",
      marca: "Kelme",
      imagen: "zenit.png"
        
    },
    {
      id: 39,
      nombre: "Camiseta Spartak Moscow",
      precio: 83000,
      equipo: "Spartak Moscow",
      marca: "Jogel",
      imagen: "moscow.png"
        
    },
    {
      id: 40,
      nombre: "Camiseta Red Bull Salzburg",
      precio: 84000,
      equipo: "Red Bull Salzburg",
      marca: "Puma",
      imagen: "red bull.png"
        
    },
  ];

let productosMostrados = 0;
let mensajeFinalMostrado = false;

function cargarProductos() {
    const listaProductos = document.getElementById('listaProductos');

    // Verifica si ya se han cargado todos los productos
    if (productosMostrados >= productos.length) {
        if (!mensajeFinalMostrado) {
            const mensajeFinal = document.createElement('p');
            mensajeFinal.textContent = 'No hay más productos por cargar.';
            mensajeFinal.classList.add('mensaje-final');
            listaProductos.appendChild(mensajeFinal);
            mensajeFinalMostrado = true;
        }
        return; // Salir si no hay más productos por cargar
    }

    // Carga los siguientes 15 productos
    setTimeout(() => {
        const fragmento = document.createDocumentFragment();
        for (let i = productosMostrados; i < productosMostrados + 15 && i < productos.length; i++) {
            const producto = productos[i];
            const tarjetaProducto = document.createElement('div');
            tarjetaProducto.classList.add('tarjeta');

            tarjetaProducto.innerHTML = `
                <img src="../imagen/${producto.imagen}" alt="${producto.nombre}" class="productoImg">
                <h3>${producto.nombre}</h3>
                <p>Precio: $${producto.precio.toLocaleString()}</p>
                
                <button onclick="verDetalle(${producto.id})">Ver Detalle</button>
            `;

            fragmento.appendChild(tarjetaProducto);
        }
        listaProductos.appendChild(fragmento);
        productosMostrados += 15;
    }, 1000); // Retraso de 1 segundo para simular la carga
}

function verificarScroll() {
    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
    // Comprueba si el usuario ha llegado al final de la página
    if (scrollTop + clientHeight >= scrollHeight - 5) {
        cargarProductos();
    }
}

// Escucha el evento de scroll
window.addEventListener('scroll', verificarScroll);

// Carga inicial de productos
document.addEventListener('DOMContentLoaded', function() {
    cargarProductos(); // Carga los primeros 15 productos al inicio
});

  
  function verDetalle(idProducto) {
      const producto = productos.find(prod => prod.id === idProducto);
      if (producto) {
          const detalleContainer = document.getElementById('productoSeleccionado');
          detalleContainer.innerHTML = `
              <img src="../imagen/${producto.imagen}" alt="${producto.nombre}" class="productoImg">
              <h3>${producto.nombre}</h3>
              <p><strong>Precio:</strong> $${producto.precio.toLocaleString()}</p>
              <p><strong>Equipo:</strong> ${producto.equipo}</p>
              <p><strong>Marca:</strong> ${producto.marca}</p>
              <div class="detalle-cantidad-talla">
                  <div class="cantidad">
                      <label for="cantidadProducto">Cantidad:</label>
                      <input type="number" id="cantidadProducto" min="1" value="1">
                  </div>
                  <div class="talla">
                      <label for="tallaProducto">Talla:</label>
                      <select id="tallaProducto">
                          <option value="S">S</option>
                          <option value="M">M</option>
                          <option value="L">L</option>
                          <option value="XL">XL</option>
                      </select>
                  </div>
              </div>
              <button onclick="agregarAlCarrito(${producto.id})">Agregar al Carrito</button>
          `;
      }
  }
  
  function agregarAlCarrito(idProducto) {
      const cantidad = document.getElementById('cantidadProducto').value;
      if (cantidad > 0) {
          const producto = productos.find(prod => prod.id === idProducto);
          if (producto) {
              const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
              const productoEnCarrito = carrito.find(p => p.id === idProducto);
              
              if (productoEnCarrito) {
                  productoEnCarrito.cantidad += Number(cantidad);
              } else {
                  carrito.push({ ...producto, cantidad: Number(cantidad) });
              }
              
              localStorage.setItem('carrito', JSON.stringify(carrito));
              alert('Producto agregado al carrito.');
              
          } else {
              alert('Error: Producto no encontrado.');
          }
      } else {
          alert('La cantidad debe ser un número positivo.');
      }
  }
  
  function filtrarProductos() {
      const marcaSeleccionada = document.getElementById('filtroTipo').value;
      const listaProductos = document.getElementById('listaProductos');
      listaProductos.innerHTML = '';
      productosMostrados = 0;
      const productosFiltrados = marcaSeleccionada === '' ? productos : productos.filter(producto => producto.marca === marcaSeleccionada);
      productosFiltrados.forEach((producto, index) => {
          const tarjetaProducto = document.createElement('div');
          tarjetaProducto.classList.add('tarjeta');
          tarjetaProducto.innerHTML = `
              <img src="../imagen/${producto.imagen}" alt="${producto.nombre}" class="productoImg">
              <h3>${producto.nombre}</h3>
              <p>Precio: $${producto.precio.toLocaleString()}</p>
              <p>Descripción: ${producto.descripcion}</p>
              <button onclick="verDetalle(${producto.id})">Ver Detalle</button>
          `;
          listaProductos.appendChild(tarjetaProducto);
      });
  }
  
  function filtrarPorEquipo() {
      const equipoSeleccionado = document.getElementById('filtroEquipo').value.toLowerCase();
      const listaProductos = document.getElementById('listaProductos');
      listaProductos.innerHTML = '';
      productosMostrados = 0;
      const productosFiltrados = equipoSeleccionado === '' ? productos : productos.filter(producto => producto.equipo.toLowerCase().includes(equipoSeleccionado));
      productosFiltrados.forEach((producto, index) => {
          const tarjetaProducto = document.createElement('div');
          tarjetaProducto.classList.add('tarjeta');
          tarjetaProducto.innerHTML = `
              <img src="../imagen/${producto.imagen}" alt="${producto.nombre}" class="productoImg">
              <h3>${producto.nombre}</h3>
              <p>Precio: $${producto.precio.toLocaleString()}</p>
              <p>Descripción: ${producto.descripcion}</p>
              <button onclick="verDetalle(${producto.id})">Ver Detalle</button>
          `;
          listaProductos.appendChild(tarjetaProducto);
      });
  }
  
  function limpiarFiltros() {
      document.getElementById('filtroTipo').value = '';
      document.getElementById('filtroEquipo').value = '';
      cargarProductos();
  }
  